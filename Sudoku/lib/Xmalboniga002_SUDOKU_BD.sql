-- phpMyAdmin SQL Dump
-- version 3.4.11.1deb2+deb7u2
-- http://www.phpmyadmin.net
--
-- Servidor: localhost
-- Tiempo de generación: 27-12-2015 a las 20:07:27
-- Versión del servidor: 5.5.46
-- Versión de PHP: 5.4.45-0+deb7u2

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de datos: `Xmalboniga002_SUDOKU_BD`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `ADMIN`
--

CREATE TABLE IF NOT EXISTS `ADMIN` (
  `NOMBRE` varchar(20) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `ADMIN`
--

INSERT INTO `ADMIN` (`NOMBRE`) VALUES
('admin');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `JUGADO`
--

CREATE TABLE IF NOT EXISTS `JUGADO` (
  `NOMBRE_JUG` varchar(20) COLLATE utf8_bin NOT NULL,
  `ID_SUDOKU` int(11) NOT NULL,
  `FECHA` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `COMPLETADO` char(1) COLLATE utf8_bin DEFAULT NULL,
  `PTO` int(11) DEFAULT NULL,
  `SEGUNDOS` int(11) DEFAULT NULL,
  PRIMARY KEY (`NOMBRE_JUG`,`ID_SUDOKU`),
  KEY `ID_SUDOKU` (`ID_SUDOKU`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `JUGADO`
--

INSERT INTO `JUGADO` (`NOMBRE_JUG`, `ID_SUDOKU`, `FECHA`, `COMPLETADO`, `PTO`, `SEGUNDOS`) VALUES
('Jorge', 1, '2015-12-27 18:47:09', 'S', 1000, 300),
('Jorge', 2, '2015-12-27 18:47:32', 'S', 800, 400),
('Jorge', 4, '2015-12-27 18:47:36', 'S', 300, 350),
('Jorge', 8, '2015-12-27 18:47:42', 'S', 4000, 500),
('Jorge', 9, '2015-12-27 18:47:44', 'S', 1500, 800);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `JUGADOR`
--

CREATE TABLE IF NOT EXISTS `JUGADOR` (
  `NOMBRE` varchar(20) COLLATE utf8_bin NOT NULL,
  `PTO_TOTAL` int(11) DEFAULT NULL,
  PRIMARY KEY (`NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `JUGADOR`
--

INSERT INTO `JUGADOR` (`NOMBRE`, `PTO_TOTAL`) VALUES
('Jorge', 7600);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `LOGRO`
--

CREATE TABLE IF NOT EXISTS `LOGRO` (
  `ID_L` varchar(5) COLLATE utf8_bin NOT NULL,
  `DESCRIPCION` varchar(100) COLLATE utf8_bin DEFAULT NULL,
  `ID_SUDOKU` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID_L`),
  KEY `ID_SUDOKU` (`ID_SUDOKU`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `LOGRO`
--

INSERT INTO `LOGRO` (`ID_L`, `DESCRIPCION`, `ID_SUDOKU`) VALUES
('R31', '1231412313', 1),
('X2', '123', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `LOGRO_PTOX`
--

CREATE TABLE IF NOT EXISTS `LOGRO_PTOX` (
  `ID_L` varchar(5) COLLATE utf8_bin NOT NULL,
  `PTO` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID_L`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `LOGRO_PTOX`
--

INSERT INTO `LOGRO_PTOX` (`ID_L`, `PTO`) VALUES
('X2', 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `LOGRO_PTOXY`
--

CREATE TABLE IF NOT EXISTS `LOGRO_PTOXY` (
  `ID_L` varchar(5) COLLATE utf8_bin NOT NULL,
  `PTO` int(11) DEFAULT NULL,
  `NUM_JUG` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID_L`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `LOGRO_RES`
--

CREATE TABLE IF NOT EXISTS `LOGRO_RES` (
  `ID_L` varchar(5) COLLATE utf8_bin NOT NULL,
  `NUM_JUG` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID_L`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `LOGRO_RES`
--

INSERT INTO `LOGRO_RES` (`ID_L`, `NUM_JUG`) VALUES
('R31', 123);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `PARTIDA`
--

CREATE TABLE IF NOT EXISTS `PARTIDA` (
  `NOMBRE_JUG` varchar(20) COLLATE utf8_bin NOT NULL,
  `ID_SUDOKU` int(11) NOT NULL,
  `MATRIZ_TABLERO` varchar(82) COLLATE utf8_bin DEFAULT NULL,
  `NUM_AYUDAS` int(11) DEFAULT NULL,
  `NUM_COMPR` int(11) DEFAULT NULL,
  `TIEMPO` int(11) DEFAULT NULL,
  `RETO` int(11) DEFAULT NULL,
  PRIMARY KEY (`NOMBRE_JUG`),
  KEY `RETO` (`RETO`),
  KEY `ID_SUDOKU` (`ID_SUDOKU`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `RETO`
--

CREATE TABLE IF NOT EXISTS `RETO` (
  `ID_R` int(11) NOT NULL AUTO_INCREMENT,
  `NOMBRE_RETADOR` varchar(20) COLLATE utf8_bin NOT NULL,
  `NOMBRE_RETADO` varchar(20) COLLATE utf8_bin NOT NULL,
  `ID_SUDOKU` int(11) NOT NULL,
  `ESTADO` char(1) COLLATE utf8_bin DEFAULT NULL,
  `FECHA` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID_R`),
  KEY `NOMBRE_RETADOR` (`NOMBRE_RETADOR`),
  KEY `NOMBRE_RETADO` (`NOMBRE_RETADO`),
  KEY `ID_SUDOKU` (`ID_SUDOKU`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `SUDOKU`
--

CREATE TABLE IF NOT EXISTS `SUDOKU` (
  `ID_S` int(11) NOT NULL AUTO_INCREMENT,
  `DIFICULTAD` int(11) DEFAULT NULL,
  `M_INIC` varchar(82) COLLATE utf8_bin DEFAULT NULL,
  `M_SOL` varchar(82) COLLATE utf8_bin DEFAULT NULL,
  `ACTIVO` char(1) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`ID_S`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=10 ;

--
-- Volcado de datos para la tabla `SUDOKU`
--

INSERT INTO `SUDOKU` (`ID_S`, `DIFICULTAD`, `M_INIC`, `M_SOL`, `ACTIVO`) VALUES
(1, 1, '006002304904750082008006005003000040200400830407500000000600008700020453000370069', '576812394914753682328946715693287541251469837487531926135694278769128453842375169', 'A'),
(2, 1, '002800070609074023408003050005080030000000740027030085000360000000517408000208090', '312895674659174823478623159945781236836952741127436985784369512293517468561248397', 'A'),
(3, 1, '000028500000600007086005340869230000512007000400500002028060000005040270004000639', '741328596953614827286975341869231754512487963437596182328769415695143278174852639', 'A'),
(4, 2, '000000084500042600004000020040063700000001003630957200050009006320800109009500800', '792615384583742691164398527948263715275481963631957248857129436326874159419536872', 'A'),
(5, 2, '008900720009010040014002500000006000040000000603540902005093200006020070000675004', '368954721529718643714362589951286437247139856683547912175493268496821375832675194', 'A'),
(6, 2, '000307000083050000900000324007862030040900000352000006000093860500780040060040003', '416327598283459617975618324197862435648935172352174986724593861531786249869241753', 'A'),
(7, 3, '070090052000000000309080000000709400050030900008650037082000570040020608600100304', '874396152561247893329581746236719485457832961918654237182463579743925618695178324', 'A'),
(8, 3, '050001000000006070309040065008914000000067829097000004004100000070000691035000200', '756391482241856973389742165528914736413567829697283514964128357872435691135679248', 'A'),
(9, 3, '000800740509000000080007096004600850010500900800920004005700009090040085000005602', '362859741579416238481237596924671853613584927857923164235768419796142385148395672', 'A');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `TIENE`
--

CREATE TABLE IF NOT EXISTS `TIENE` (
  `NOMBRE_JUG` varchar(20) COLLATE utf8_bin NOT NULL,
  `ID_LOGRO` varchar(5) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`NOMBRE_JUG`,`ID_LOGRO`),
  KEY `ID_LOGRO` (`ID_LOGRO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `USUARIO`
--

CREATE TABLE IF NOT EXISTS `USUARIO` (
  `NOMBRE` varchar(20) COLLATE utf8_bin NOT NULL,
  `CONTR` varchar(20) COLLATE utf8_bin NOT NULL,
  `PREG` varchar(50) COLLATE utf8_bin DEFAULT NULL,
  `RESP` varchar(50) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

--
-- Volcado de datos para la tabla `USUARIO`
--

INSERT INTO `USUARIO` (`NOMBRE`, `CONTR`, `PREG`, `RESP`) VALUES
('Jorge', '123456', '¿Nombre del perro más guay que existe?', 'Snoopy'),
('MIKEL', 'ALBO', NULL, NULL),
('admin', 'admin', '¿Quién soy?', 'admin');

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `ADMIN`
--
ALTER TABLE `ADMIN`
  ADD CONSTRAINT `ADMIN_ibfk_1` FOREIGN KEY (`NOMBRE`) REFERENCES `USUARIO` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `JUGADO`
--
ALTER TABLE `JUGADO`
  ADD CONSTRAINT `JUGADO_ibfk_1` FOREIGN KEY (`NOMBRE_JUG`) REFERENCES `JUGADOR` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `JUGADO_ibfk_2` FOREIGN KEY (`ID_SUDOKU`) REFERENCES `SUDOKU` (`ID_S`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `JUGADOR`
--
ALTER TABLE `JUGADOR`
  ADD CONSTRAINT `JUGADOR_ibfk_1` FOREIGN KEY (`NOMBRE`) REFERENCES `USUARIO` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `LOGRO`
--
ALTER TABLE `LOGRO`
  ADD CONSTRAINT `LOGRO_ibfk_1` FOREIGN KEY (`ID_SUDOKU`) REFERENCES `SUDOKU` (`ID_S`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `LOGRO_PTOX`
--
ALTER TABLE `LOGRO_PTOX`
  ADD CONSTRAINT `LOGRO_PTOX_ibfk_1` FOREIGN KEY (`ID_L`) REFERENCES `LOGRO` (`ID_L`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `LOGRO_PTOXY`
--
ALTER TABLE `LOGRO_PTOXY`
  ADD CONSTRAINT `LOGRO_PTOXY_ibfk_1` FOREIGN KEY (`ID_L`) REFERENCES `LOGRO` (`ID_L`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `LOGRO_RES`
--
ALTER TABLE `LOGRO_RES`
  ADD CONSTRAINT `LOGRO_RES_ibfk_1` FOREIGN KEY (`ID_L`) REFERENCES `LOGRO` (`ID_L`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `PARTIDA`
--
ALTER TABLE `PARTIDA`
  ADD CONSTRAINT `PARTIDA_ibfk_1` FOREIGN KEY (`RETO`) REFERENCES `RETO` (`ID_R`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `PARTIDA_ibfk_2` FOREIGN KEY (`NOMBRE_JUG`) REFERENCES `JUGADOR` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `PARTIDA_ibfk_3` FOREIGN KEY (`ID_SUDOKU`) REFERENCES `SUDOKU` (`ID_S`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `RETO`
--
ALTER TABLE `RETO`
  ADD CONSTRAINT `RETO_ibfk_1` FOREIGN KEY (`NOMBRE_RETADOR`) REFERENCES `JUGADOR` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `RETO_ibfk_2` FOREIGN KEY (`NOMBRE_RETADO`) REFERENCES `JUGADOR` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `RETO_ibfk_3` FOREIGN KEY (`ID_SUDOKU`) REFERENCES `SUDOKU` (`ID_S`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Filtros para la tabla `TIENE`
--
ALTER TABLE `TIENE`
  ADD CONSTRAINT `TIENE_ibfk_1` FOREIGN KEY (`NOMBRE_JUG`) REFERENCES `JUGADOR` (`NOMBRE`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `TIENE_ibfk_2` FOREIGN KEY (`ID_LOGRO`) REFERENCES `LOGRO` (`ID_L`) ON DELETE CASCADE ON UPDATE CASCADE;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
